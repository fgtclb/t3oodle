<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	  xmlns:t3oodle="http://typo3.org/ns/T3/T3oodle/ViewHelpers"
	  data-namespace-typo3-fluid="true">

	<f:layout name="Default" />

	<f:section name="content">
		<h1>Polls</h1>

		<f:flashMessages />

		<ol class="collection mb-3">
			<li class="item">
				<div class="attribute"><strong>Titel</strong></div>
				<div class="attribute"><strong>Autor</strong></div>
				<div class="attribute"><strong>Veröffentlicht</strong></div>
				<div class="attribute"><strong>Teilnehmer</strong></div>
			</li>
			<f:for each="{polls}" as="poll">
				<li class="item">
					<div class="attribute" data-name="Titel">
						<f:link.action action="show" arguments="{poll : poll}" class="font-weight-bold">{poll.title}</f:link.action>
					</div>
					<div class="attribute" data-name="Autor">{poll.authorName}</div>
					<div class="attribute" data-name="Veröffentlicht">
						<f:if condition="{poll.published}">
							<f:then>{poll.publishDate -> f:format.date(format:'{settings.dateTimeFormat}')}</f:then>
							<f:else><em>Unveröffentlicht</em></f:else>
						</f:if>
					</div>
					<div class="attribute" data-name="Teilnehmer">{poll.votes -> f:count()}</div>
				</li>
			</f:for>
		</ol>

		<f:link.action action="new" class="btn btn-primary">Create new poll</f:link.action>
	</f:section>
</html>
